<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Checking Authentication...</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    body {
      margin: 0;
      height: 100vh;
      background: #000;
      color: #fff;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      pointer-events: none;
      user-select: none;
    }
  </style>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
  <script src="firebase-init.js"></script>
</head>
<body>
<!-- Tiny early guard (does NOT replace auth security; just avoids spinner stalls) -->
<script>
try {
  // If we have a known role and user is already authenticated, bounce quickly.
  // The full auth-check.js will still run right after and re-verify.
  var role = localStorage.getItem('user_role');
  if (role === 'contractor') {
    // If someone opens auth-check directly and they’re a contractor, they expect dashboard
    if (!location.pathname.endsWith('dashboard.html')) location.replace('dashboard.html');
  } else if (role === 'staff') {
    if (!location.pathname.endsWith('tally.html')) location.replace('tally.html');
  }
} catch (e) {}
</script>

<div id="loading-overlay" class="show">
  <div class="circle-spinner"></div>
  <div>Checking login… Please wait.</div>
</div>

  <script src="auth-check.js"></script>
</body>
</html>
